<ChiliPairsGame>:
    orientation: 'vertical'
    chiligrid: _chiligrid

    BoxLayout:
        orientation: 'horizontal'
        size_hint: 1, 0.1
        spacing: 10
        Label:
            font_size: 20
            #text: 'Set Actual Nombre... si'
            text: 'Now learning: ' + str(root.set_loaded)

        Label:
            font_size: 20
            text: 'Time: ' + root.elapsed_time_str

    BoxLayout:
        orientation: 'horizontal'
        size_hint: 1, 0.9
        spacing: 10

        ChiliGrid:
            id: _chiligrid
            chiligame: root

        BoxLayout
            orientation: 'vertical'
            size_hint: 0.1, 1
            spacing: 20

            Button:
                text: ' Show \n Cards (' + str(root.showcards_helper.remaining) + ')'
                on_press: root.use_help('show')

            Button:
                text: ' Guess \n Object (' + str(root.guessobj_helper.remaining) + ')'

                on_press: root.use_help('guess')

            Button:
                text: ' Pause \n Game'
                on_press: root.pause()


            Button:
                text: ' Restart \n Game'
                on_press: root.restart_game()

<ChiliGrid>:
    spacing: 10
    # size: 800, 600
    size_hint: 0.9, 1 
    gridsize: 4, 6

<ChiliCard>:
    orientation: 'vertical'
    size: 100, 100
    back_widget: _back.__self__
    padding: 2
    canvas:
        Color:
            rgba: self.bgcolor
        Rectangle:
            size: self.size
            pos: self.pos

    Button:
        id: _back
        pos: root.pos
        size: root.size
        on_press: root.flip()

        canvas:
            
            Color:
                rgba: root.back_color
            Rectangle:
                pos: self.pos
                size: self.size
                source: root.back_img


<ChiliMenu@BoxLayout>:
    size: root.size
    pos: root.pos
    orientation: "vertical"
    set_options: _set_options
    chiligame: None
    continue_btn: _continue_btn

    Accordion:
        orientation: "vertical"
        AccordionItem:
            title: "Play"
            collapse: True
            BoxLayout:
                id: _set_options
                chiligame: root.chiligame
                orientation: "vertical"
        AccordionItem:
            title: "Settings"
            title_template: "AccordionItemTitle"
    Button:
        id: _continue_btn
        text: "Continue"
        disabled: True
        size_hint: 1, 0.1
        on_press: root.chiligame.hide_menu()

<SetButton@Button>:
    background_color: 0, 1, 0, 1
    set_id: -1
    on_press: 
        self.parent.chiligame.new_game(self.set_id)
        self.parent.chiligame.hide_menu()

[AccordionItemTitle@Button]:
    text: ctx.title
    canvas.before:
        Color:
            rgb: 1, 1, 1
        BorderImage:
            source:
                ctx.item.background_normal \
                if ctx.item.collapse \
                else ctx.item.background_selected
            pos: self.pos
            size: self.size
        PushMatrix
        Translate:
            xy: self.center_x, self.center_y
        Rotate:
            angle: 90 if ctx.item.orientation == 'horizontal' else 0
            axis: 0, 0, 1
        Translate:
            xy: -self.center_x, -self.center_y
    canvas.after:
        PopMatrix
    on_press: print "press"
